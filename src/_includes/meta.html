{%- if page.title -%}
  {%- assign page_title = page.title -%}
  {%- assign title = page.title | append: " - " | append: site.title -%}
{%- else -%}
  {%- assign page_title = site.title -%}
  {%- assign title = site.title -%}
{%- endif -%}

{%- if page.lead -%}
  {%- assign description = page.lead -%}
  {%- elsif page.intro -%}
  {%- assign description = page.intro -%}
  {%- elsif page.description -%}
  {%- assign description = page.description -%}
{%- else -%}
  {%- assign description = site.description -%}
{%- endif -%}
{%- assign description = description | normalize_whitespace -%}
{%- assign is_article = page.date and page.tags -%}

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1" />

{% seo title=title description=description %}

{%- if is_article -%}
  {%- for tag in page.tags -%}
    <meta property="article:tag" content="{{ tag }}" />
  {%- endfor -%}
  <meta property="article:published_time"
        content="{{ page.date | date: "%FT%T%z" }}" />
{%- endif -%}

{% comment %} OpenGraph fields that won't be rendered by the jekyll-seo plugin {% endcomment %}
<meta property="og:image"
      content="{{ site.url | absolute_url }}/images/og-image.png" />
<meta name="twitter:site" content="@California_ITP">
<meta name="twitter:creator" content="@California_ITP">
<meta name="twitter:domain" content="{{ site.domain }}" />

<link rel="canonical" href="{{ page.url | absolute_url }}" />
{% if page.asset or page.external -%}
  <meta name="robots" content="noindex">
{%- endif -%}
