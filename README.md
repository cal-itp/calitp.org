# calitp.org

A brief explainer website for the California Integrated Travel Project (Cal-ITP) <https://calitp.org>.

Deployed via [Netlify](https://www.netlify.com/)
[![Netlify Status](https://api.netlify.com/api/v1/badges/71c28b11-ddb3-4a83-b4e7-04e77c918372/deploy-status)](https://app.netlify.com/projects/cal-itp-website/deploys)

## Development

This is a [Jekyll][jekyll] static site. We include a [Dev Container][devcontainer] configuration to help with local testing
and development.

1. Open the repository directory in VS Code
1. `Ctrl/Cmd+Shift+P` to bring up the Command Palette
1. Start typing `devcontainers` to filter the command list
1. Enter or select `Rebuild and Reopen in Container` to start from scratch
1. Enter or select `Reopen in Container` to reopen the last devcontainer used

Once inside the devcontainer, you have to manually start the site:

1. `Ctrl/Cmd+Shift+P` to bring up the Command Palette
1. Enter `Tasks: Run Task`
1. Enter or select `Jekyll: Build and Serve Locally`

The site is now running on <http://127.0.0.1>; check the VS Code _Ports_ tab for the exact port. You may also see a notification appear indicating the port and prompting you to open it in your browser. Auto rebuild/reload will be active and will watch the site files for changes.

## Analytics

Site analytics is tracked by Google Analytics, version 4. Ask an administrator to grant you access.

## Resources and Press content routing

The Resources and Press sections are each a collection of items that may either (a) render their content on a calitp.org page or (b) reference an different URL.

### Resources

The Resources index lists all items within the `_resources` folder. Jekyll generates a standard content page for each of these items, but if an item's front matter has an `asset` property, then the listing on the Resources index will link to whatever the value of that `asset` property is. Otherwise, it links to the standard Jekyll content page.

Resource pages that are generated by Jekyll for external assets are rendered with `<meta name="robots" content="noindex">` to prevent search engines from indexing them, and they redirect to the URL in their `asset` property.

#### Adding new resources

We have a semi-automated way of handling resource requests that come in via GitHub Issues, using a Python script combined with the [`gh`](http://cli.github.com/) command:

```bash
gh issue view <issue num> --json body | python .github/scripts/resource-template.py
```

We have a GitHub Actions workflow that runs this script against all new issues and will automatically open a PR to add the requested resource, if the issue in fact appears to be a resource request and it is said to be approved. If an issue is opened initially for a resource that is not yet approved, the PR can be created automatically once the resource has been approved by going to [the workflow's page](./actions/workflows/resource-template.yml) and using the **Run workflow** button.

### Press

The Press index lists all items within the `_press` folder. Jekyll generates a standard content page for each of these items, but if an item's front matter has an `external` property, then the listing on the Press index will link to whatever the value of that `external` property is. Otherwise, it links to the standard Jekyll content page.

Press pages that are generated by Jekyll for external articles are rendered with `<meta name="robots" content="noindex">` to prevent search engines from indexing them, and they redirect to the URL in their `external` property.

### Uploading PDFs to calitp.org

As of January 2026, all press and resources that are PDFs are to be uploaded to the [`/assets/`](https://github.com/cal-itp/calitp.org/tree/main/src/assets) folder in this repo. Do not link to Google Drive. Do not upload to Google Cloud.


## Docs

The devcontainer serves the docs site automatically at: http://localhost:8001

The [`mkdocs.yml`](mkdocs.yml) file in the repository root configures the build process, including the available plugins.

## License

Content (including graphics, images, video, documents, and text) in this repository is licensed under [CC-BY 4.0][content-license].

The source code in this repository used to format and display the content is licensed under [GPL-3.0][code-license].

[code-license]: ./LICENSE
[content-license]: https://creativecommons.org/licenses/by/4.0/
[devcontainer]: https://code.visualstudio.com/docs/devcontainers/containers
[mkdocs.yml]: ./mkdocs.yml
[jekyll]: https://jekyllrb.com
